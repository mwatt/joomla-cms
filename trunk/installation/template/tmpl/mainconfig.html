<jtmpl:comment>
@version $Id: mainconfig.html 137 2005-09-12 10:21:17Z eddieajau $
@package Joomla
@subpackage Installation
@copyright Copyright (C) 2005 - 2006 Open Source Matters. All rights reserved.
@license http://www.gnu.org/copyleft/gpl.html GNU/GPL
</jtmpl:comment>

<script language="JavaScript" type="text/javascript">
	function validateForm( frm, task ) {
		var siteName = getElementByName( frm, 'vars[siteName]' );
		var adminEmail = getElementByName( frm , 'vars[adminEmail]' );
		var adminPassword = getElementByName( frm , 'vars[adminPassword]' );

		if (siteName.value == '') {
			alert( '<jtmpl:translate key="warnSiteName" escape="yes">Please enter a site name</jtmpl:translate>' );
		} else if (adminEmail.value == '') {
			alert( '<jtmpl:translate key="warnEmailAddress" escape="yes">Please enter a valid email address</jtmpl:translate>' );
		} else if (adminPassword.value == '') {
			alert( '<jtmpl:translate key="warnAdminPassword" escape="yes">Please enter a valid admin password</jtmpl:translate>' );
		} else {
			submitForm( frm, task );
		}
	}

	function selectMode() {
		var frm = this.document.filename;
		if(frm.what_to_load[0].checked) {
			frm.instDefault.disabled = false;
			frm.sqlFile.disabled = true;
			frm.sqlLoad.disabled = true;
		} else {
			frm.instDefault.disabled = true;
			frm.sqlFile.disabled = false;
			frm.sqlLoad.disabled = false;
		}
	}

	function JDefault() {
		xajax_instDefault(xajax.getFormValues('filename'));
	}

	function externalSql(frm, task) {

		if (frm.sqlFile.value == '') {
			alert("no file provided");
			return;
		} else {
			frm.sqlupload.value = '1';
			submitForm(frm, task);
		}
	}

</script>

<form action="index.php" method="post" name="adminForm">
<div id="right">
	<div id="rightpad">
		<div id="step">
			<div id="steppad">
				<div class="far-right">
					<jtmpl:tmpl name="buttons" type="condition" conditionvar="direction">
						<jtmpl:sub condition="ltr">
							<div class="button1-right"><div class="prev"><a onclick="submitForm( adminForm, 'ftpconfig' );" alt="<jtmpl:translate escape="yes">Previous</jtmpl:translate>"><jtmpl:translate escape="yes">Previous</jtmpl:translate></a></div></div>
							<div class="button1-left"><div class="next"><a onclick="submitForm( adminForm, 'saveconfig' );" alt="<jtmpl:translate escape="yes">Next</jtmpl:translate>"><jtmpl:translate escape="yes">Next</jtmpl:translate></a></div></div>
						</jtmpl:sub>
						<jtmpl:sub condition="rtl">
							<div class="button1-right"><div class="prev"><a onclick="submitForm( adminForm, 'saveconfig' );" alt="<jtmpl:translate escape="yes">Next</jtmpl:translate>"><jtmpl:translate escape="yes">Next</jtmpl:translate></a></div></div>
							<div class="button1-left"><div class="next"><a onclick="submitForm( adminForm, 'ftpconfig' );" alt="<jtmpl:translate escape="yes">Previous</jtmpl:translate>"><jtmpl:translate escape="yes">Previous</jtmpl:translate></a></div></div>
						</jtmpl:sub>
					</jtmpl:tmpl>
				</div>
				<span class="step"><jtmpl:translate>Main Configuration</jtmpl:translate></span>
			</div>
		</div>

		<div id="installer">
			<div id="installerpad">

				<h2><jtmpl:translate>Site Name</jtmpl:translate>:</h2>
				<div class="install-text">
					<jtmpl:translate key="enterSiteName">Enter the name of your Joomla! site.</jtmpl:translate>
				</div>
				<div class="install-body">
					<div class="install-form">
						<fieldset>
							<table class="content2">
				  			   <tr>
				  				  <td width="100">
									<label for="siteName">
				  				  		<jtmpl:translate>Site name</jtmpl:translate>
				  				  	</label>
				  				  </td>
				  				  <td align="center">
				  				  	<input class="inputbox" type="text" id="siteName" name="vars[siteName]" size="30" value="{VAR_SITENAME}" />
				  				  </td>
				  			   </tr>
							</table>
						</fieldset>
					</div>
					<div class="clr"></div>
				</div>

				<h2><jtmpl:translate key="confTitle">Confirm the admin email and password</jtmpl:translate></h2>
				<div class="install-text">
					<jtmpl:translate key="tipConfSteps">
					<p>Enter your e-mail address, this will be the e-mail address of the site
				   SuperAdministrator.</p>
					</jtmpl:translate>
				</div>
				<div class="install-body">
					<div class="install-form">
						<fieldset>
							<table class="content2">
							<tr>
							  <td>
								<label for="adminEmail">
								  	<jtmpl:translate>Your E-mail</jtmpl:translate>
			  				  	</label>
							  </td>
							  <td align="center">
							  	<input class="inputbox" type="text" id="adminEmail" name="vars[adminEmail]" value="" size="30" />
							  </td>
							</tr>
							<tr>
							  <td>
								<label for="adminPassword">
								  	<jtmpl:translate>Admin password</jtmpl:translate>
			  				  	</label>
							  </td>
							  <td align="center">
							  	<input class="inputbox" type="text" id="adminPassword" name="vars[adminPassword]" value="{VAR_ADMINPASSWORD}" size="30"/>
							  </td>
							</table>
						</fieldset>
					</div>
					<div class="clr"></div>
				</div>

			</div>
<input type="hidden" name="task" value="" />
</form>
<form enctype="multipart/form-data" action="index.php" method="post" name="filename" id="filename">
			<div id="installerpad">

				<h2><jtmpl:translate>Load Sample Data or Restore Backed Up Content</jtmpl:translate></h2>
				<div class="install-text">
					<jtmpl:translate>LOADSQLINSTRUCTIONS1</jtmpl:translate>
					<br/><br/>
					<jtmpl:translate>LOADSQLINSTRUCTIONS2</jtmpl:translate>
				</div>
				<div class="install-body">
					<div class="install-form">
						<fieldset>
							<table class="content2">
				  			<tr>
				    			<td></td>
				    			<td></td>
				    			<td></td>
							</tr>
				  			<tr>
					  		    <td>
					  		    	<input id="default_sample" type="radio" name="what_to_load" checked="checked" onclick="selectMode();"/>
					  		    </td>
								<td>
				    				<label for="default_sample">
										<jtmpl:translate>Install default sample data</jtmpl:translate>
									</label>
								</td>
				    			<td>
				    				<em>
				    				<jtmpl:translate key="tipInstallDefault" />
				    				</em>
				    			</td>
					  		</tr>
					  		<tr>
					  			<td></td>
					  			<td colspan="2">
									<span id="theDefault"><input class="button" type="button" name="instDefault" value="<jtmpl:translate>Install default sample data</jtmpl:translate>" onclick="JDefault();"/></span>
					  			</td>
					  		</tr>
					  		<tr>
					  			<td>&nbsp;</td>
					  			<td></td>
					  			<td></td>
					  		</tr>
				  			<tr>
					  		    <td>
					  		    	<input id="local_sql" type="radio" name="what_to_load" onclick="selectMode();"/>
					  		    </td>
								<td>
				    				<label for="local_sql">
										<jtmpl:translate>Load local SQL script</jtmpl:translate>
									</label>
								</td>
				    			<td>
				    				<em>
				    				<jtmpl:translate key="tipLoadSql">The SQL scripts need to be in utf-8 encoding and should have the appropriate table prefix</jtmpl:translate>
				    				</em>
				    			</td>
					  		</tr>
					  		<tr>
					  			<td></td>
					  			<td colspan="2">
									<input class="input_box" id="sql_script" name="sqlFile" type="file" size="40" disabled="disabled" />
									<br/>
									<input class="button" type="button" name="sqlLoad" value="Upload and execute" disabled="disabled" onclick="externalSql(filename, 'mainconfig');"/>
									<br/><br/>

									<span id="theResponse">{VAR_RESPONSE}<span>
					  			</td>
					  		</tr>
					  		</table>

						</fieldset>
					</div>
					<div class="clr"></div>
				</div>
			</div>




		</div>

	</div>
</div>

<div class="clr"></div>

<input type="hidden" name="task" value="mainconfig" />
<input type="hidden" name="sqlupload" value="0" />
<input type="hidden" name="DBtype" value="{VAR_DBTYPE}" />
<input type="hidden" name="DBhostname" value="{VAR_DBHOSTNAME}" />
<input type="hidden" name="DBuserName" value="{VAR_DBUSERNAME}" />
<input type="hidden" name="DBpassword" value="{VAR_DBPASSWORD}" />
<input type="hidden" name="DBname" value="{VAR_DBNAME}" />
<input type="hidden" name="DBPrefix" value="{VAR_DBPREFIX}" />
<input type="hidden" name="ftpRoot" value="{VAR_FTPROOT}" />
<input type="hidden" name="ftpEnable" value="{VAR_FTPENABLE}" />
<input type="hidden" name="ftpHost" value="{VAR_FTPHOST}" />
<input type="hidden" name="ftpPort" value="{VAR_FTPPORT}" />
<input type="hidden" name="ftpUser" value="{VAR_FTPUSER}" />
<input type="hidden" name="ftpPassword" value="{VAR_FTPPASSWORD}" />
</form>
