<mos:comment>
@version $Id: list.html 137 2005-09-12 10:21:17Z eddieajau $
@package Mambo
@copyright Copyright (C) 2005 Open Source Matters. All rights reserved.
@license http://www.gnu.org/copyleft/gpl.html GNU/GPL
</mos:comment>

<mos:tmpl type="simplecondition" requiredvars="P_PAGE_TITLE=1" varscope="BODY">
<!-- Show Header -->
	<div class="componentheading{P_PAGECLASS_SFX}">
		{P_HEADER}
	</div>
</mos:tmpl>

<table width="100%" cellpadding="4" cellspacing="0" border="0" align="center" class="contentpane{P_PAGECLASS_SFX}">
	<tr>
		<td width="60%" valign="top" class="contentdescription{P_PAGECLASS_SFX}" colspan="2">
			<mos:tmpl type="simplecondition" requiredvars="P_IMAGE=#[^-][^1]#" varscope="BODY">
			<!-- Show Image -->
				<img src="{SITEURL}/images/stories/{P_IMAGE}" align="{P_IMAGE_ALIGN}" hspace="6" alt="<mos:Translate>WEBLINKS_TITLE</mos:Translate>" />
			</mos:tmpl>

			<mos:tmpl type="simplecondition" requiredvars="P_DESCRIPTION=1" varscope="BODY">
			<!-- Show Description -->
				{P_DESCRIPTION_TEXT}
			</mos:tmpl>
		</td>
	</tr>

	<mos:tmpl type="simplecondition" requiredvars="body.hasTable=1">
	<!-- Show Table of Links -->
		<tr>
			<td>
				<script language="javascript" type="text/javascript">
				<!--
				// needed for Table Column ordering
				function reorder( order ) {
					frm = document.adminForm;
					if (frm.orderCol.value == order) {
						frm.orderDirn.value = 1 - frm.orderDirn.value;
					} else {
						frm.orderDirn.value = 0;
					}
					frm.orderCol.value = order;
					submitform( 'category' );
				}

				function submitform(pressbutton){
					document.adminForm.task.value=pressbutton;
					try {
						document.adminForm.onsubmit();
						}
					catch(e){}
					document.adminForm.submit();
				}
				//-->
				</script>

				<table width="100%" border="0" cellspacing="0" cellpadding="0" align="center">
				<mos:tmpl type="simplecondition" requiredvars="P_HEADINGS=1" varscope="BODY">
				<!-- Show Table Headings -->
					<tr>
						<td class="sectiontableheader{P_PAGECLASS_SFX}" width="50" nowrap="nowrap" align="center">
							<a href="#" onclick="reorder('ordering')">
								<mos:Translate>NUM</mos:Translate>
								<mos:tmpl type="simplecondition" requiredvars="ordercol=ordering" varscope="body">
									<img src="{SITEURL}/images/M_images/sort{ORDERDIRN}.png" alt="" border="0" /></mos:tmpl></a>
						</td>
						<td height="20" class="sectiontableheader{P_PAGECLASS_SFX}">
							<a href="#" onclick="reorder('title')">
								<mos:Translate>Title</mos:Translate>
								<mos:tmpl type="simplecondition" requiredvars="ordercol=title" varscope="body">
									<img src="{SITEURL}/images/M_images/sort{ORDERDIRN}.png" alt="" border="0" /></mos:tmpl></a>
						</td>

						<mos:tmpl type="simplecondition" requiredvars="P_HITS=1" varscope="BODY">
						<!-- Show Hits Column -->
							<td width="60" height="20" class="sectiontableheader{P_PAGECLASS_SFX}" align="right" nowrap="nowrap">
								<a href="#" onclick="reorder('hits')">
									<mos:Translate>Hits</mos:Translate>
									<mos:tmpl type="simplecondition" requiredvars="ordercol=hits" varscope="body">
										<img src="{SITEURL}/images/M_images/sort{ORDERDIRN}.png" alt="" border="0" /></mos:tmpl></a>
							</td>
						</mos:tmpl>
					</tr>
				</mos:tmpl>

				<mos:tmpl name="ROWS" varscope="BODY" >
					<tr class="sectiontableentry{PAT_IS_EVEN}{P_PAGECLASS_SFX}">
						<td height="20" align="center">
							{ROW_IMG}
						</td>
						<td>
							<a href="{ROW_HREF}" onclick="{ROW_ONCLICK}" target="{ROW_TARGET}" class="category{P_PAGECLASS_SFX}">
								{ROW_TITLE}</a>

							<mos:tmpl type="simplecondition" requiredvars="P_ITEM_DESCRIPTION=1" varscope="BODY, ROWS">
							<!-- Show Description -->
								<br />
								{ROW_DESCRIPTION}
							</mos:tmpl>
						</td>

						<mos:tmpl type="simplecondition" requiredvars="P_HITS=1" varscope="BODY, ROWS">
						<!-- Show Hits Column -->
							<td align="center">
								{ROW_HITS}
							</td>
						</mos:tmpl>
					</tr>
				</mos:tmpl>
				</table>
			</td>
		</tr>
	</mos:tmpl>

	<mos:tmpl type="simplecondition" requiredvars="P_OTHER_CAT=1" varscope="BODY">
	<!-- Show List of Categories for Section-->
		<tr>
			<td>
				<br/>
				<ul>
					<mos:tmpl name="CATEGORIES" type="condition" conditionvar="CATID" varscope="BODY">
						<mos:sub condition="{CAT_ID}">
						<!-- Currently selected Category -->
							<li>
								<strong>{CAT_TITLE}</strong>
							</li>
						</mos:sub>

						<mos:sub condition="__default">
						<!-- Unselected Catgeories -->
							<li>
								<a href="{CAT_LINK}" class="category{P_MODULECLASS_SFX}">
									{CAT_TITLE}</a>

								<mos:tmpl type="simplecondition" requiredvars="P_CAT_ITEMS=1" varscope="CATEGORIES">
									<span class="small">( {CAT_NUMLINKS} )</span>
								</mos:tmpl>

								<mos:tmpl type="simplecondition" requiredvars="P_CAT_DESCRIPTION=1, CATS_TEXT" varscope="CATEGORIES">
									<div>
										{CATS_TEXT}
									</div>
								</mos:tmpl>
							</li>
						</mos:sub>
					</mos:tmpl>
				</ul>
			</td>
		</tr>
	</mos:tmpl>
</table>

<input type="hidden" name="orderCol" value="{ORDERCOL}" />
<input type="hidden" name="orderDirn" value="{ORDERDIRN}" />
<input type="hidden" name="option" value="{OPTION}" />
<input type="hidden" name="task" value="{TASK}" />

<mos:tmpl type="simplecondition" requiredvars="P_BACK_BUTTON=1" varscope="BODY">
<!-- Show Back Button -->
	<br/>
	<mos:link src="back_button" varscope="BODY"/>
</mos:tmpl>
{ONAFTERDISPLAYCONTENT}