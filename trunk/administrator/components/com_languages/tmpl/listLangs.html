<mos:comment>
@version $Id: listLangs.html 137 2005-09-12 10:21:17Z eddieajau $
@package Mambo
@copyright Copyright (C) 2005 Open Source Matters. All rights reserved.
@license http://www.gnu.org/copyleft/gpl.html GNU/GPL
</mos:comment>

<style type="text/css">
.write {
	color: green;
}

.readonly {
	color: red;
}

.source {
	width: 100%;
	height: 500px;
}
</style>

<script language="JavaScript" type="text/javascript">
function getSelectedBox( frm, fldName ) {
	elems = getElementsByName( frm, fldName );
	box = null;
	for (i in elems) {
		if (elems[i].checked) {
			box = elems[i];
		}
	}
	return box;
}

function getFileExt( fileName ) {
	pos = fileName.lastIndexOf( '.' );
	return fileName.substr( pos+1 );
}

function submitbutton( task ) {
	var frm = document.adminForm;

	if (task == 'edit') {
		file = getSelectedBox( frm, 'cid[]' );
		ext = getFileExt( file.value );
		if (ext == 'xml') {
			task = 'editXML';
		}
	} else if (task == 'packageOptions') {
		file = getSelectedBox( frm, 'cid[]' );
		ext = getFileExt( file.value );
		if (ext != 'xml') {
			alert( '<mos:Translate key="validXmlFile">Please select an XML file</mos:Translate>' );
			return;
		}
	} else if (task == 'create') {
		if (frm.newfile.value == '') {
			alert( '<mos:Translate key="validName">Please enter a name</mos:Translate>' );
			return;
		}
	}
	submitform( task );
}
</script>

<div id="treecell">
	<fieldset>
		<legend>
			<mos:Translate>Navigator</mos:Translate>
		</legend>
		<mos:tmpl src="tree.html" />
	</fieldset>

	<fieldset>
		<legend><mos:Translate>Create</mos:Translate></legend>

		<label for="newfile">
			<mos:Call template="tooltip" text="Language Name" tip="tipNewFile" />
		</label>
		<div style="margin-top:5px;"></div>
		<input type="text" name="newfile" id="newfile" value="" size="15" maxlength="40" class="inputbox" />
		<br/>

		<label for="newfile">
			<mos:Call template="tooltip" text="Copy From" tip="tipCopyFrom" />
		</label>
		<div style="margin-top:5px;"></div>
		<select name="copyfrom" class="inputbox">
			<option value="" selected="true"><mos:Translate>Empty Files</mos:Translate></option>
		<mos:tmpl name="copy-files" type="simplecondition" requiredvars="name">
			<option value="{VALUE}"><mos:var name="tname" copyfrom="name" modifier="Translate" /></option>
		</mos:tmpl>
		</select>

		<br/>
		<br/>
		<input type="button" value="<mos:Translate>Create</mos:Translate>" onclick="submitbutton( 'create' )" class="button" />

		<br/>
		<br/>
		<mos:Translate>Folder is</mos:Translate>:
		<mos:tmpl type="condition" conditionvar="body.writable">
			<mos:sub condition="1">
				<span class="write"><mos:Translate>Writable</mos:Translate></span>
			</mos:sub>
			<mos:sub condition="0">
				<span class="readonly"><mos:Translate>Unwritable</mos:Translate></span>
			</mos:sub>
		</mos:tmpl>
	</fieldset>
</div>

<div id="datacell">
	<fieldset>
		<legend>
			<mos:tmpl type="condition" conditionvar="body.client">
				<mos:sub condition="__default">
					<mos:Translate>Site</mos:Translate>
				</mos:sub>

				<mos:sub condition="1">
					<mos:Translate>Administrator</mos:Translate>
				</mos:sub>
				<mos:sub condition="2">
					<mos:Translate>Web Installer</mos:Translate>
				</mos:sub>
			</mos:tmpl>
			::
			<mos:Translate>{ELEMENT}</mos:Translate>
		</legend>


		<table class="adminlist" id="moslist">
		<thead>
			<tr>
				<th width="20">
					<input type="checkbox" name="toggle" value="" />
				</th>
				<th class="title">
					<mos:Translate>File</mos:Translate>
				</th>
				<th width="10%">
					<mos:Translate>Size</mos:Translate>
				</th>
				<th width="20%">
					<mos:Translate>Last Modified</mos:Translate>
				</th>
				<th width="20%">
					<mos:Translate>Permissions</mos:Translate>
				</th>
			</tr>
		</thead>
		<tbody>
			<mos:tmpl name="body-list-rows" type="simplecondition" requiredvars="file" varscope="body" addsystemvars="integer">
			<tr class="row{PAT_IS_EVEN}">
			    <td style="text-align:center">
			    	<input type="checkbox" name="cid[]" id="cb{PAT_ROW_VAR}" value="{FILE}" />
				</td>
				<td>
					<a href="#edit" onclick="return listItemTask('cb{PAT_ROW_VAR}','edit')" class="editlink">
						{FILE}</a>
				</td>
				<td align="right" nowrap="nowrap">
					{FSIZE} b
				</td>
				<td align="center">
					{MTIME}
				</td>
				<td align="center">
					{PERMS}
				</td>
			</tr>
			</mos:tmpl>
		</tbody>
		</table>
	</fieldset>
</div>

<input type="hidden" name="option" value="{OPTION}" />
<input type="hidden" name="task" value="" />
<input type="hidden" name="client" value="{CLIENT}" />
<input type="hidden" name="element" value="{ELEMENT}" />

<mos:link src="include-tooltips" />