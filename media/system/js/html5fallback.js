!function(e,t,a){"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t});var r={init:function(a,r){var i=this;i.elem=r,i.$elem=e(r),r.H5Form=i,i.options=e.extend({},e.fn.h5f.options,a),i.field=t.createElement("input"),i.checkSupport(i),"form"===r.nodeName.toLowerCase()&&i.bindWithForm(i.elem,i.$elem)},bindWithForm:function(e,t){var r=this,i=!!t.attr("novalidate"),s=e.elements,l=s.length;for("onSubmit"===r.options.formValidationEvent&&t.on("submit",function(e){i=!!t.attr("novalidate");var s=this.H5Form.donotValidate!=a?this.H5Form.donotValidate:!1;s||i||r.validateForm(r)?t.find(":input").each(function(){r.placeholder(r,this,"submit")}):(e.preventDefault(),this.donotValidate=!1)}),t.on("focusout focusin",function(e){r.placeholder(r,e.target,e.type)}),t.on("focusout change",r.validateField),t.find("fieldset").on("change",function(){r.validateField(this)}),r.browser.isFormnovalidateNative||t.find(":submit[formnovalidate]").on("click",function(){r.donotValidate=!0});l--;){var o=s[l];r.polyfill(o),r.autofocus(r,o)}},polyfill:function(e){if("form"===e.nodeName.toLowerCase())return!0;var t=e.form.H5Form;t.placeholder(t,e),t.numberType(t,e)},checkSupport:function(e){e.browser={},e.browser.isRequiredNative=!!("required"in e.field),e.browser.isPatternNative=!!("pattern"in e.field),e.browser.isPlaceholderNative=!!("placeholder"in e.field),e.browser.isAutofocusNative=!!("autofocus"in e.field),e.browser.isFormnovalidateNative=!!("formnovalidate"in e.field),e.field.setAttribute("type","email"),e.browser.isEmailNative="email"==e.field.type,e.field.setAttribute("type","url"),e.browser.isUrlNative="url"==e.field.type,e.field.setAttribute("type","number"),e.browser.isNumberNative="number"==e.field.type,e.field.setAttribute("type","range"),e.browser.isRangeNative="range"==e.field.type},validateForm:function(){var e=this,t=e.elem,a=t.elements,r=a.length,i=!0;t.isValid=!0;for(var s=0;r>s;s++){var l=a[s];l.isRequired=!!l.required,l.isDisabled=!!l.disabled,l.isDisabled||(i=e.validateField(l),t.isValid&&!i&&e.setFocusOn(l),t.isValid=i&&t.isValid)}return e.options.doRenderMessage&&e.renderErrorMessages(e,t),t.isValid},validateField:function(t){var r=t.target||t;if(r.form===a)return null;if($elem=e(r),$elem.hasClass("novalidate"))return!0;{var i=r.form.H5Form,s=!1,l=!!e(r).attr("required");!!$elem.attr("disabled")}if(r.isDisabled||(s=!i.browser.isRequiredNative&&l&&i.isValueMissing(i,r),isPatternMismatched=!i.browser.isPatternNative&&i.matchPattern(i,r)),r.validityState={valueMissing:s,patterMismatch:isPatternMismatched,valid:r.isDisabled||!(s||isPatternMismatched)},i.browser.isRequiredNative||(r.validityState.valueMissing?$elem.addClass(i.options.requiredClass):$elem.removeClass(i.options.requiredClass)),i.browser.isPatternNative||(r.validityState.patterMismatch?$elem.addClass(i.options.patternClass):$elem.removeClass(i.options.patternClass)),r.validityState.valid){$elem.removeClass(i.options.invalidClass);var o=i.findLabel($elem);o.removeClass(i.options.invalidClass)}else{$elem.addClass(i.options.invalidClass);var o=i.findLabel($elem);o.addClass(i.options.invalidClass)}return r.validityState.valid},isValueMissing:function(r,i){var s=e(i),l=/^submit$/i,o=s.val(),n=i.type!==a?i.type:i.tagName.toLowerCase(),d=/^(checkbox|radio|fieldset)$/i;if(d.test(n)||l.test(n)){if(d.test(n)){if("checkbox"===n)return!s.is(":checked");var u;u="fieldset"===n?s.find("input"):t.getElementsByName(i.name);for(var f=0;f<u.length;f++)if(e(u[f]).is(":checked"))return!1;return!0}}else{if(""===o)return!0;if(!r.browser.isPlaceholderNative&&s.hasClass(r.options.placeholderClass))return!0}return!1},matchPattern:function(t,r){var i=e(r),s=!t.browser.isPlaceholderNative&&i.attr("placeholder")&&i.hasClass(t.options.placeholderClass)?"":i.attr("value"),l=i.attr("pattern"),o=i.attr("type");if(""!==s)if("email"===o){var n=!0;if(i.attr("multiple")===a)return!t.options.emailPatt.test(s);s=s.split(t.options.mutipleDelimiter);for(var d=0;d<s.length;d++)if(n=t.options.emailPatt.test(s[d].replace(/[ ]*/g,"")),!n)return!0}else{if("url"===o)return!t.options.urlPatt.test(s);if("text"===o&&l!==a)return usrPatt=RegExp("^(?:"+l+")$"),!usrPatt.test(s)}return!1},placeholder:function(t,r,i){var s=e(r),l={placeholder:s.attr("placeholder")},o=/^(focusin|submit)$/i,n=/^(input|textarea)$/i,d=/^password$/i,u=t.browser.isPlaceholderNative;u||!n.test(r.nodeName)||d.test(r.type)||l.placeholder===a||(""!==r.value||o.test(i)?r.value===l.placeholder&&o.test(i)&&(r.value="",s.removeClass(t.options.placeholderClass)):(r.value=l.placeholder,s.addClass(t.options.placeholderClass)))},numberType:function(t,a){var r=e(a);if(node=/^input$/i,type=r.attr("type"),node.test(a.nodeName)&&("number"==type&&!t.browser.isNumberNative||"range"==type&&!t.browser.isRangeNative)){var i,s=parseInt(r.attr("min")),l=parseInt(r.attr("max")),o=parseInt(r.attr("step")),n=parseInt(r.attr("value")),d=r.prop("attributes"),u=e("<select>");s=isNaN(s)?-100:s;for(var f=s;l>=f;f+=o)i=e("<option>").attr("value",f).text(f),(n==f||n>f&&f+o>n)&&i.attr("selected",""),u.append(i);e.each(d,function(){u.attr(this.name,this.value)}),r.replaceWith(u)}},autofocus:function(a,r){var i=e(r),s=!!i.attr("autofocus"),l=/^(input|textarea|select|fieldset)$/i,o=/^submit$/i,n=a.browser.isAutofocusNative;!n&&l.test(r.nodeName)&&!o.test(r.type)&&s&&e(t).ready(function(){a.setFocusOn(r)})},refreshFormLabels:function(e,t){var r,i,s,l,o={};jQuery("label").each(function(){r=jQuery(this),s=r.attr("for"),s&&(o[s]=r);var e=r.attr("id");e&&-1!==e.indexOf("-lbl",e.length-4)&&(o[e.slice(0,-4)]=r)}),a===t&&(t=e.elements);for(var n=jQuery(),d=0;d<t.length;d++)i=jQuery(t[d]),i.data("label")===a&&(l=i.attr("id"),l&&o.hasOwnProperty(l)?i.data("label",o[l]):i.data("label",n))},findLabel:function(e){var t=this,a=e.get(0).form,r=e.attr("id"),i=e.data("label");if(i||(r?t.refreshFormLabels(a,a.elements):e.data("label",jQuery())),i=e.data("label"),i.length<=0){var s=e.parent();parentTagName=s.get(0).tagName.toLowerCase(),"label"==parentTagName&&(i=s,e.data("label",i))}return i},setFocusOn:function(t){"fieldset"===t.tagName.toLowerCase()?e(t).find(":first").focus():e(t).focus()},renderErrorMessages:function(t,a){var r=a.elements,i=r.length,s={};for(s.errors=[];i--;){var l=e(r[i]),o=t.findLabel(l);l.hasClass(t.options.requiredClass)&&(s.errors[i]=o.text().replace("*","")+t.options.requiredMessage),l.hasClass(t.options.patternClass)&&(s.errors[i]=o.text().replace("*","")+t.options.patternMessage)}s.errors.length>0&&Joomla.renderMessages(s)}};e.fn.h5f=function(e){return this.each(function(){var t=Object.create(r);t.init(e,this)})},e.fn.h5f.options={invalidClass:"invalid",requiredClass:"required",requiredMessage:" is required.",placeholderClass:"placeholder",patternClass:"pattern",patternMessage:" doesn't match pattern.",doRenderMessage:!1,formValidationEvent:"onSubmit",emailPatt:/^[a-zA-Z0-9.!#$%&‚Äô*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,urlPatt:/[a-z][\-\.+a-z]*:\/\//i},e(function(){e("form").h5f({doRenderMessage:!0,requiredClass:"musthavevalue"})})}(jQuery,document);