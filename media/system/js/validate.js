var JFormValidator=function(){"use strict";var e,t,a,r=function(t,a,r){r=""===r?!0:r,e[t]={enabled:r,exec:a}},i=function(e,t){var a,r,i,s,l={};jQuery("label").each(function(){a=jQuery(this),i=a.attr("for"),i&&(l[i]=a);var e=a.attr("id");e&&-1!==e.indexOf("-lbl",e.length-4)&&(l[e.slice(0,-4)]=a)}),void 0===t&&(t=e.elements);for(var n=jQuery(),o=0;o<t.length;o++)r=jQuery(t[o]),void 0===r.data("label")&&(s=r.attr("id"),s&&l.hasOwnProperty(s)?r.data("label",l[s]):r.data("label",n))},s=function(e,t){if(!e)return!1;var a=jQuery("#"+e),r=a.data("label");if(r||(e?i(t,t.elements):a.data("label",jQuery())),r=a.data("label"),r.length<=0){var s=a.parent();parentTagName=s.get(0).tagName.toLowerCase(),"label"==parentTagName&&(r=s,a.data("label",r))}return r.length?r:!1},l=function(e,t){var a=t.data("label");void 0===a&&(a=s(t.attr("id"),t.get(0).form)),e===!1?(t.addClass("invalid").attr("aria-invalid","true"),a&&a.addClass("invalid")):(t.removeClass("invalid").attr("aria-invalid","false"),a&&a.removeClass("invalid"))},n=function(t){var a,r,i=jQuery(t);if(i.attr("disabled"))return l(!0,i),!0;if(i.attr("required")||i.hasClass("required"))if(a=i.prop("tagName").toLowerCase(),"fieldset"===a&&(i.hasClass("radio")||i.hasClass("checkboxes"))){if(!i.find("input:checked").length)return l(!1,i),!1}else if(!i.val()||i.hasClass("placeholder")||"checkbox"===i.attr("type")&&!i.is(":checked"))return l(!1,i),!1;return r=i.attr("class")&&i.attr("class").match(/validate-([a-zA-Z0-9\_\-]+)/)?i.attr("class").match(/validate-([a-zA-Z0-9\_\-]+)/)[1]:"",""===r?(l(!0,i),!0):r&&"none"!==r&&e[r]&&i.val()&&e[r].exec(i.val(),i)!==!0?(l(!1,i),!1):(l(!0,i),!0)},o=function(e){var t,r,i,s,l,o,d=!0,u=[];for(t=jQuery(e).find("input, textarea, select, fieldset"),l=0,o=t.length;o>l;l++)jQuery(t[l]).hasClass("novalidate")||n(t[l])===!1&&(d=!1,u.push(t[l]));if(jQuery.each(a,function(e,t){t.exec()!==!0&&(d=!1)}),!d&&u.length>0){for(r=Joomla.JText._("JLIB_FORM_FIELD_INVALID"),i={error:[]},l=u.length-1;l>=0;l--)s=jQuery(u[l]).data("label"),s&&i.error.push(r+s.text().replace("*",""));Joomla.renderMessages(i)}else d&&Joomla.removeMessages();return d},d=function(e){var a,r=[],i=jQuery(e);a=i.find("input, textarea, select, fieldset, button");for(var s=0,l=a.length;l>s;s++){var d=jQuery(a[s]),u=d.prop("tagName").toLowerCase();"input"!==u&&"button"!==u||"submit"!==d.attr("type")&&"image"!==d.attr("type")?"button"===u||"input"===u&&"button"===d.attr("type")||(d.hasClass("required")&&d.attr("aria-required","true").attr("required","required"),"fieldset"!==u&&(d.on("blur",function(){return n(this)}),d.hasClass("validate-email")&&t&&a[s].setAttribute("type","email")),r.push(d)):d.hasClass("validate")&&d.on("click",function(){return o(e)})}i.data("inputfields",r)},u=function(){e={},a=a||{},t=function(){var e=document.createElement("input");return e.setAttribute("type","email"),"text"!==e.type}(),r("username",function(e){var t=RegExp("[<|>|\"|'|%|;|(|)|&]","i");return!t.test(e)}),r("password",function(e){var t=/^\S[\S ]{2,98}\S$/;return t.test(e)}),r("numeric",function(e){var t=/^(\d|-)?(\d|,)*\.?\d*$/;return t.test(e)}),r("email",function(e){e=punycode.toASCII(e);var t=/^[a-zA-Z0-9.!#$%&â€™*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;return t.test(e)});for(var i=jQuery("form.form-validate"),s=0,l=i.length;l>s;s++)d(i[s])};return u(),{isValid:o,validate:n,setHandler:r,attachToForm:d,custom:a}};document.formvalidator=null,jQuery(function(){document.formvalidator=new JFormValidator});