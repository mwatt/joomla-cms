var JFormValidator=function(){"use strict";var e,a,t,r=function(a,t,r){r=""===r?!0:r,e[a]={enabled:r,exec:t}},n=function(e){var a,t,r,n,i={};jQuery("label").each(function(){a=jQuery(this),r=a.attr("for"),r&&(i[r]=a);var e=a.attr("id");e&&-1!==e.indexOf("-lbl",e.length-4)&&(i[e.slice(0,-4)]=a)});for(var l=jQuery(e).find("fieldset").toArray().concat(Array.from(e.elements)),s=0;s<l.length;s++)t=jQuery(l[s]),void 0===t.data("label")&&(n=t.attr("id"),n&&i.hasOwnProperty(n)?t.data("label",i[n]):t.data("label",!1))},i=function(e,a){if(!e)return!1;var t=jQuery("#"+e),r=t.data("label");return r||(e?n(a):t.data("label",!1)),r=t.data("label"),void 0===r&&(r=!1,t.data("label",r)),r},l=function(e,a){var t=a.data("label");void 0===t&&(t=i(a.attr("id"),a.get(0).form)),e===!1?(a.addClass("invalid").attr("aria-invalid","true"),t&&t.addClass("invalid")):(a.removeClass("invalid").attr("aria-invalid","false"),t&&t.removeClass("invalid"))},s=function(a){var t,r,n=jQuery(a);if(n.attr("disabled"))return l(!0,n),!0;if(n.attr("required")||n.hasClass("required"))if(t=n.prop("tagName").toLowerCase(),"fieldset"===t&&(n.hasClass("radio")||n.hasClass("checkboxes"))){if(!n.find("input:checked").length)return l(!1,n),!1}else if(!n.val()||n.hasClass("placeholder")||"checkbox"===n.attr("type")&&!n.is(":checked"))return l(!1,n),!1;return r=n.attr("class")&&n.attr("class").match(/validate-([a-zA-Z0-9\_\-]+)/)?n.attr("class").match(/validate-([a-zA-Z0-9\_\-]+)/)[1]:"",""===r?(l(!0,n),!0):r&&"none"!==r&&e[r]&&n.val()&&e[r].exec(n.val(),n)!==!0?(l(!1,n),!1):(l(!0,n),!0)},o=function(e){var a,r,n,i,l,o,u=!0,d=[];for(jQuery(".invalid_jfield_message").remove(),a=jQuery(e).find("fieldset").toArray().concat(Array.from(e.elements)),l=0,o=a.length;o>l;l++){var c=jQuery(a[l]),f=c.prop("tagName").toLowerCase();c.hasClass("novalidate")||"button"==f||s(a[l])===!1&&(u=!1,d.push(a[l]))}if(jQuery.each(t,function(e,a){a.exec()!==!0&&(u=!1)}),!u&&d.length>0){for(r=Joomla.JText._("JLIB_FORM_FIELD_INVALID"),n={error:[]},l=d.length-1;l>=0;l--)i=jQuery(d[l]).data("label"),i?n.error.push(r+i.text().replace("*","")):jQuery('<span class="alert alert-error invalid_jfield_message" style="display:inline-block; margin: 2px 12px;">'+r+"</span>").insertAfter(jQuery(d[l]));Joomla.renderMessages(n)}else u&&Joomla.removeMessages();return u},u=function(e){var t,r=[],n=jQuery(e);t=n.find("fieldset").toArray().concat(Array.from(e.elements));for(var i=0,l=t.length;l>i;i++){var u=jQuery(t[i]),d=u.prop("tagName").toLowerCase();"input"!==d&&"button"!==d||"submit"!==u.attr("type")&&"image"!==u.attr("type")?"button"===d||"input"===d&&"button"===u.attr("type")||(u.hasClass("required")&&u.attr("aria-required","true").attr("required","required"),"fieldset"!==d&&(u.on("blur",function(){return s(this)}),u.hasClass("validate-email")&&a&&t[i].setAttribute("type","email")),r.push(u)):u.hasClass("validate")&&u.on("click",function(){return o(e)})}n.data("inputfields",r)},d=function(){e={},t=t||{},a=function(){var e=document.createElement("input");return e.setAttribute("type","email"),"text"!==e.type}(),r("username",function(e){var a=RegExp("[<|>|\"|'|%|;|(|)|&]","i");return!a.test(e)}),r("password",function(e){var a=/^\S[\S ]{2,98}\S$/;return a.test(e)}),r("numeric",function(e){var a=/^(\d|-)?(\d|,)*\.?\d*$/;return a.test(e)}),r("email",function(e){e=punycode.toASCII(e);var a=/^[a-zA-Z0-9.!#$%&â€™*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;return a.test(e)});for(var n=jQuery("form.form-validate"),i=0,l=n.length;l>i;i++)u(n[i])};return d(),{isValid:o,validate:s,setHandler:r,attachToForm:u,custom:t}};document.formvalidator=null,jQuery(function(){document.formvalidator=new JFormValidator});